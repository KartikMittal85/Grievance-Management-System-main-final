<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Grievance Status Tracking</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <style>
        .badge-submitted { background-color: #FFD700; color: black; }
        .badge-seen { background-color: #1E90FF; color: white; }
        .badge-inprogress { background-color: #FFA500; color: white; }
        .badge-resolved { background-color: #28a745; color: white; }
        .badge-rejected { background-color: #dc3545; color: white; }

        /* Timeline styling */
        .timeline {
            position: relative;
            padding-left: 40px;
            margin-top: 30px;
        }
        .timeline::before {
            content: '';
            position: absolute;
            top: 0;
            left: 20px;
            width: 4px;
            height: 100%;
            background: #dee2e6;
        }
        .timeline-item {
            position: relative;
            margin-bottom: 30px;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 12px;
            top: 0;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #6c757d;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h2>Grievance Status Tracking</h2>
        <p><strong>Grievance ID:</strong> {{ grievance.id }} | <strong>Category:</strong> {{ grievance.category }}</p>
        <p><strong>Description:</strong> {{ grievance.description }}</p>

        <div class="timeline">
            {% for entry in grievance.history %}
            <div class="timeline-item">
                <span class="
                    {% if entry.status == 'Submitted' %}badge-submitted{% endif %}
                    {% if entry.status == 'Seen' %}badge-seen{% endif %}
                    {% if entry.status == 'In Progress' %}badge-inprogress{% endif %}
                    {% if entry.status == 'Resolved' %}badge-resolved{% endif %}
                    {% if entry.status == 'Rejected' %}badge-rejected{% endif %}
                    badge
                ">
                    {{ entry.status }}
                </span>
                <p class="mt-1 mb-0"><strong>Remarks:</strong> {{ entry.remarks or 'N/A' }}</p>
                <small class="text-muted">{{ entry.timestamp.strftime('%d-%b-%Y %I:%M %p') }}</small>
            </div>
            {% endfor %}
        </div>

        <a href="{{ url_for('student_dashboard') }}" class="btn btn-secondary mt-4">Back to Dashboard</a>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
